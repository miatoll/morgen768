<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тренажер на Пошук Відповідностей</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .progress-bar-item {
            transition: background-color 0.3s ease-in-out;
        }
        .btn {
            transition: all 0.2s ease;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn.correct {
            animation: pulse-green 0.5s;
        }
        .btn.incorrect {
            animation: shake 0.5s;
        }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200 flex items-center justify-center min-h-screen p-4">
    <div id="quiz-container" class="w-full max-w-4xl bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 md:p-8">
        <!-- Заголовок та прогрес -->
        <div class="text-center mb-6">
            <h1 class="text-2xl md:text-3xl font-bold text-gray-900 dark:text-white">Тренажер: Будова Обладнання</h1>
            <p class="text-gray-600 dark:text-gray-400 mt-1">Знайдіть відповідність для кожної позиції</p>
        </div>
        
        <!-- Прогрес-бар -->
        <div id="progress-bar-container" class="mb-6">
            <div class="flex justify-between items-center mb-2">
                 <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Прогрес</span>
                 <span id="progress-text" class="text-sm font-medium text-gray-700 dark:text-gray-300">Етап 1 з 19</span>
            </div>
            <div id="progress-bar" class="flex w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden space-x-1">
                <!-- Елементи прогресу будуть вставлені сюди -->
            </div>
        </div>

        <!-- Ігрова зона -->
        <div id="game-area" class="text-center">
            <div class="mb-6 p-8 bg-blue-50 dark:bg-blue-900/20 border-2 border-dashed border-blue-200 dark:border-blue-700 rounded-xl">
                <p class="text-lg text-gray-600 dark:text-gray-400 mb-2">Позиція №</p>
                <h2 id="question" class="text-5xl md:text-7xl font-bold text-blue-600 dark:text-blue-400"></h2>
            </div>
            
            <div id="hint-display" class="min-h-[3rem] my-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg hidden">
                <p class="text-sm text-yellow-800 dark:text-yellow-300 font-semibold">
                    <span class="font-bold">Підказка (Позначення):</span> <span id="hint-text"></span>
                </p>
            </div>

            <div id="answer-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Кнопки з варіантами відповідей -->
            </div>
            
            <div class="mt-8 flex justify-center">
                <button id="hint-button" class="btn bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-6 rounded-lg shadow-md">
                    Показати позначення
                </button>
            </div>
        </div>

        <!-- Результати -->
        <div id="results-area" class="hidden text-center py-10">
            <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">Тест завершено!</h2>
            <div class="flex justify-center space-x-4 md:space-x-8 text-xl my-6">
                <div class="bg-green-100 dark:bg-green-900/30 p-4 rounded-lg">
                    <span class="font-bold text-green-600 dark:text-green-400">Правильно:</span>
                    <span id="correct-count" class="font-bold">0</span>
                </div>
                <div class="bg-red-100 dark:bg-red-900/30 p-4 rounded-lg">
                    <span class="font-bold text-red-600 dark:text-red-400">Неправильно:</span>
                    <span id="incorrect-count" class="font-bold">0</span>
                </div>
                 <div class="bg-yellow-100 dark:bg-yellow-900/30 p-4 rounded-lg">
                    <span class="font-bold text-yellow-600 dark:text-yellow-400">З підказкою:</span>
                    <span id="hint-used-count" class="font-bold">0</span>
                </div>
            </div>
            <button id="retry-button" class="btn bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-lg text-lg shadow-lg">
                Спробувати ще раз
            </button>
        </div>
    </div>

    <script>
        const quizData = [
            { pos: 1, designation: '2239-П', name: 'Машина мийна' },
            { pos: 2, designation: '-', name: "Скриня для ганчір'я" },
            { pos: 3, designation: '-', name: 'Верстак для розбирання і збирання вузлів паливної апаратури' },
            { pos: 4, designation: '-', name: 'Скриня для збирання кольорових металів' },
            { pos: 5, designation: '-', name: 'Підставка під обладнання' },
            { pos: 6, designation: 'НС-12', name: 'Настільно-свердлильний верстат' },
            { pos: 7, designation: 'SPF 1108', name: 'Стенд для перевірки і регулювання ПНВТ' },
            { pos: 8, designation: '-', name: 'Шафа для приладів і матеріалів' },
            { pos: 9, designation: '-', name: 'Стелаж поличковий для продукції і ремонтного фонду' },
            { pos: 10, designation: '-', name: 'Стілець підйомно-поворотний' },
            { pos: 11, designation: '-', name: 'Стіл конторський' },
            { pos: 12, designation: '-', name: "Прилад для перевірки електромагнітних і п'єзо-форсунок" },
            { pos: 13, designation: '-', name: 'Витяжний зонд' },
            { pos: 14, designation: '-', name: 'Камера для обдуву деталей' },
            { pos: 15, designation: '-', name: 'Пристрій для випробування бензонасосів' },
            { pos: 16, designation: 'И-138А', name: 'Верстат точильний двосторонній' },
            { pos: 17, designation: 'Launch CNC-602A', name: 'Установка для перевірки і ультразвукової очистки форсунок' },
            { pos: 18, designation: 'WYNNS 68409', name: 'Установка для промивки паливної системи' },
            { pos: 19, designation: '-', name: 'Лещата' }
        ];

        // Елементи DOM
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const questionEl = document.getElementById('question');
        const answerOptionsEl = document.getElementById('answer-options');
        const hintButton = document.getElementById('hint-button');
        const hintDisplay = document.getElementById('hint-display');
        const hintText = document.getElementById('hint-text');
        const gameArea = document.getElementById('game-area');
        const resultsArea = document.getElementById('results-area');
        const correctCountEl = document.getElementById('correct-count');
        const incorrectCountEl = document.getElementById('incorrect-count');
        const hintUsedCountEl = document.getElementById('hint-used-count');
        const retryButton = document.getElementById('retry-button');

        // Стан гри
        let shuffledQuestions, currentQuestionIndex;
        let progressStatus; // 'unanswered', 'correct', 'incorrect', 'hint'
        let questionAlreadyWrong;

        // Ініціалізація гри
        function startGame() {
            shuffledQuestions = [...quizData].sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            questionAlreadyWrong = false;
            progressStatus = Array(quizData.length).fill('unanswered');
            
            gameArea.classList.remove('hidden');
            resultsArea.classList.add('hidden');
            
            renderProgressBar();
            loadNextQuestion();
        }

        // Завантаження наступного питання
        function loadNextQuestion() {
            resetQuestionState();
            if (currentQuestionIndex >= shuffledQuestions.length) {
                endGame();
                return;
            }

            progressText.textContent = `Етап ${currentQuestionIndex + 1} з ${quizData.length}`;
            const currentQuestion = shuffledQuestions[currentQuestionIndex];
            questionEl.textContent = currentQuestion.pos;
            
            // Генерація варіантів відповіді
            const options = getOptions(currentQuestion);
            answerOptionsEl.innerHTML = '';
            options.forEach(option => {
                const button = document.createElement('button');
                button.innerHTML = option.name;
                button.classList.add('btn', 'w-full', 'p-4', 'rounded-lg', 'bg-white', 'dark:bg-gray-700', 'border', 'border-gray-300', 'dark:border-gray-600', 'text-left', 'hover:bg-gray-100', 'dark:hover:bg-gray-600');
                button.onclick = () => checkAnswer(option.name, button);
                answerOptionsEl.appendChild(button);
            });
        }
        
        function resetQuestionState() {
            questionAlreadyWrong = false;
            hintButton.disabled = false;
            hintDisplay.classList.add('hidden');
            hintText.textContent = '';
        }

        // Генерація варіантів відповідей (1 правильна + 3 неправильних)
        function getOptions(currentQuestion) {
            const correctOption = currentQuestion;
            const wrongOptions = quizData
                .filter(item => item.pos !== correctOption.pos)
                .sort(() => Math.random() - 0.5)
                .slice(0, 3);
            
            const options = [correctOption, ...wrongOptions];
            return options.sort(() => Math.random() - 0.5);
        }

        // Перевірка відповіді
        function checkAnswer(selectedName, button) {
            const isHintUsed = progressStatus[currentQuestionIndex] === 'hint';
            const correctName = shuffledQuestions[currentQuestionIndex].name;
            const isCorrect = selectedName === correctName;

            // Блокуємо всі кнопки
            Array.from(answerOptionsEl.children).forEach(btn => btn.disabled = true);
            hintButton.disabled = true;

            if (isCorrect) {
                button.classList.add('correct', 'bg-green-500', 'dark:bg-green-600', 'text-white', 'border-green-500');
                if (!questionAlreadyWrong) {
                     progressStatus[currentQuestionIndex] = isHintUsed ? 'hint' : 'correct';
                }
                
                renderProgressBar();
                setTimeout(() => {
                    currentQuestionIndex++;
                    loadNextQuestion();
                }, 1000);
            } else {
                button.classList.add('incorrect', 'bg-red-500', 'dark:bg-red-600', 'text-white', 'border-red-500');
                if (!questionAlreadyWrong) {
                    questionAlreadyWrong = true;
                    progressStatus[currentQuestionIndex] = 'incorrect';
                    renderProgressBar();
                }
                // Розблоковуємо інші кнопки
                 Array.from(answerOptionsEl.children).forEach(btn => {
                    if (btn !== button) {
                        btn.disabled = false;
                    }
                });
            }
        }
        
        // Показ підказки
        hintButton.addEventListener('click', () => {
             if (progressStatus[currentQuestionIndex] === 'unanswered') {
                progressStatus[currentQuestionIndex] = 'hint';
                renderProgressBar();
             }
            hintText.textContent = shuffledQuestions[currentQuestionIndex].designation;
            hintDisplay.classList.remove('hidden');
            hintButton.disabled = true;
        });

        // Рендеринг прогрес-бару
        function renderProgressBar() {
            progressBar.innerHTML = '';
            progressStatus.forEach(status => {
                const item = document.createElement('div');
                item.classList.add('progress-bar-item', 'w-full', 'h-full');
                switch(status) {
                    case 'correct':
                        item.classList.add('bg-green-500');
                        break;
                    case 'incorrect':
                        item.classList.add('bg-red-500');
                        break;
                    case 'hint':
                        item.classList.add('bg-yellow-400');
                        break;
                    default: // unanswered
                        item.classList.add('bg-gray-300', 'dark:bg-gray-600');
                }
                progressBar.appendChild(item);
            });
        }
        
        // Завершення гри
        function endGame() {
            gameArea.classList.add('hidden');
            resultsArea.classList.remove('hidden');
            
            correctCountEl.textContent = progressStatus.filter(s => s === 'correct').length;
            incorrectCountEl.textContent = progressStatus.filter(s => s === 'incorrect').length;
            hintUsedCountEl.textContent = progressStatus.filter(s => s === 'hint').length;
        }

        // Перезапуск
        retryButton.addEventListener('click', startGame);

        // Перший запуск
        startGame();
    </script>
</body>
</html>
